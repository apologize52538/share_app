(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4727b2ea"],{"0d2e":function(t,e,n){"use strict";n("7741")},"408a":function(t,e,n){var a=n("e330");t.exports=a(1..valueOf)},"44a5":function(t,e,n){"use strict";n("abfd")},5899:function(t,e){t.exports="\t\n\v\f\r                　\u2028\u2029\ufeff"},"58a8":function(t,e,n){var a=n("e330"),r=n("1d80"),i=n("577e"),s=n("5899"),c=a("".replace),o="["+s+"]",l=RegExp("^"+o+o+"*"),u=RegExp(o+o+"*$"),f=function(t){return function(e){var n=i(r(e));return 1&t&&(n=c(n,l,"")),2&t&&(n=c(n,u,"")),n}};t.exports={start:f(1),end:f(2),trim:f(3)}},7156:function(t,e,n){var a=n("1626"),r=n("861d"),i=n("d2bb");t.exports=function(t,e,n){var s,c;return i&&a(s=e.constructor)&&s!==n&&r(c=s.prototype)&&c!==n.prototype&&i(t,c),t}},7741:function(t,e,n){},"7abe":function(t,e,n){"use strict";n.r(e);var a=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"home"},[a("van-nav-bar",{scopedSlots:t._u([{key:"left",fn:function(){return[a("van-image",{attrs:{width:"120",fit:"contain",src:n("cf05")}})]},proxy:!0},{key:"right",fn:function(){return[a("van-button",{staticClass:"btn-search",attrs:{round:"",icon:"search",type:"primary"},on:{click:function(e){return t.$router.push("/search")}}},[t._v("搜索")])]},proxy:!0}])}),a("van-tabs",{staticClass:"my-tabs",model:{value:t.active,callback:function(e){t.active=e},expression:"active"}},[t._l(t.channels,(function(t){return a("van-tab",{key:t.id,attrs:{title:t.name}},[a("article-list",{attrs:{channel_id:t.id}})],1)})),a("van-icon",{staticClass:"icon-channel",attrs:{name:"wap-nav"},on:{click:function(e){t.show=!0}}})],2),a("van-action-sheet",{attrs:{title:"频道管理"},model:{value:t.show,callback:function(e){t.show=e},expression:"show"}},[a("channel-edit",{attrs:{ownChannels:t.channels,allChannels:t.allChannels},on:{close:function(e){t.show=!1}},model:{value:t.active,callback:function(e){t.active=e},expression:"active"}})],1)],1)},r=[],i=n("1da1"),s=(n("96cf"),n("365c")),c=(n("e9c4"),"hmtt76_channel"),o=function(t){window.localStorage.setItem(c,JSON.stringify(t))},l=function(){return JSON.parse(window.localStorage.getItem(c))},u=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{ref:"artList",staticClass:"articleList"},[n("van-pull-refresh",{on:{refresh:t.onRefresh},model:{value:t.pullLoading,callback:function(e){t.pullLoading=e},expression:"pullLoading"}},[n("van-list",{attrs:{finished:t.finished,"finished-text":"没有更多了"},on:{load:t.onLoad},model:{value:t.loading,callback:function(e){t.loading=e},expression:"loading"}},t._l(t.list,(function(e){return n("van-cell",{key:e.art_id,attrs:{title:e.title},on:{click:function(n){return t.$router.push({path:"/article",query:{id:e.art_id}})}},scopedSlots:t._u([{key:"label",fn:function(){return[n("van-grid",{attrs:{border:!1,"column-num":e.cover.type}},t._l(e.cover.images,(function(t,e){return n("van-grid-item",{key:e},[n("van-image",{attrs:{src:t}})],1)})),1),n("div",{staticClass:"info"},[n("span",[t._v(t._s(e.aut_name))]),n("span",{staticStyle:{margin:"0 10px"}},[t._v(t._s(e.comm_count)+"评论")]),n("span",[t._v(t._s(t._f("relvTime")(e.pubdate)))]),n("van-icon",{staticStyle:{float:"right"},attrs:{name:"cross"}})],1)]},proxy:!0}],null,!0)})})),1)],1)],1)},f=[],d=n("2909"),h={name:"articleList",props:{channel_id:{required:!0}},data:function(){return{pullLoading:!1,list:[],loading:!1,finished:!1,timestamp:Date.now(),scrollTop:0}},methods:{onLoad:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){var n,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(s["c"])({channel_id:t.channel_id,timestamp:t.timestamp});case 2:a=e.sent,(n=t.list).push.apply(n,Object(d["a"])(a.data.data.results)),t.timestamp=a.data.data.pre_timestamp,t.loading=!1,null==t.timestamp&&(t.finished=!0);case 7:case"end":return e.stop()}}),e)})))()},onRefresh:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(s["c"])({channel_id:t.channel_id,timestamp:Date.now()});case 2:n=e.sent,t.list=n.data.data.results,t.timestamp=n.data.data.pre_timestamp,t.pullLoading=!1;case 6:case"end":return e.stop()}}),e)})))()}},mounted:function(){var t=this;this.$refs.artList.onscroll=function(){t.scrollTop=t.$refs.artList.scrollTop}},activated:function(){this.$refs.artList.scrollTop=this.scrollTop}},p=h,v=(n("44a5"),n("2877")),m=Object(v["a"])(p,u,f,!1,null,null,null),b=m.exports,g=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"channel-edit"},[n("div",{staticClass:"channel-wrap"},[n("div",{staticClass:"title"},[n("span",[t._v("我的频道")]),n("van-button",{attrs:{size:"small",plain:"",type:"danger"},on:{click:function(e){t.isEdit=!t.isEdit}}},[t._v(t._s(t.isEdit?"取消":"编辑"))])],1),n("van-grid",t._l(t.ownChannels,(function(e,a){return n("van-grid-item",{key:e.id},[n("span",{class:{active:a==t.value},on:{click:function(e){return t.intoChannel(a)}}},[t._v(t._s(e.name))]),t.isEdit&&a?n("van-icon",{staticClass:"del-icon",attrs:{name:"cross"},on:{click:function(n){return t.delChannel(a,e)}}}):t._e()],1)})),1)],1),n("div",{staticClass:"channel-wrap"},[t._m(0),n("van-grid",t._l(t.optionalChannel,(function(e){return n("van-grid-item",{key:e.id,attrs:{text:e.name},on:{click:function(n){return t.addChannel(e)}}})})),1)],1)])},_=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"title"},[n("span",[t._v("可选频道")])])}],w=(n("a9e3"),n("a434"),n("4de4"),n("d3b7"),n("7db0"),{props:{ownChannels:{required:!0,type:Array},allChannels:{required:!0,type:Array},value:{type:Number}},data:function(){return{isEdit:!1}},methods:{intoChannel:function(t){this.$emit("input",t),this.$emit("close")},addChannel:function(t){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(e.ownChannels.push(t),!e.$store.state.tokenObj.token){n.next=6;break}return n.next=4,Object(s["a"])({channels:[{id:t.id,seq:e.ownChannels.length}]});case 4:n.next=7;break;case 6:o(e.ownChannels);case 7:case"end":return n.stop()}}),n)})))()},delChannel:function(t,e){var n=this;return Object(i["a"])(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(n.ownChannels.splice(t,1),t<n.value&&n.$emit("input",n.value-1),!n.$store.state.tokenObj.token){a.next=7;break}return a.next=5,Object(s["h"])(e.id);case 5:a.next=8;break;case 7:o(n.ownChannels);case 8:case"end":return a.stop()}}),a)})))()}},computed:{optionalChannel:function(){var t=this;return this.allChannels.filter((function(e){return!t.ownChannels.find((function(t){return t.id==e.id}))}))}}}),k=w,x=(n("fbf3"),Object(v["a"])(k,g,_,!1,null,"e12030bc",null)),y=x.exports,C={name:"home",components:{articleList:b,channelEdit:y},data:function(){return{active:0,show:!1,channels:[],allChannels:[]}},created:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){var n,a,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(n=l(),n&&!t.$store.state.tokenObj.token){e.next=8;break}return e.next=4,Object(s["e"])();case 4:a=e.sent,t.channels=a.data.data.channels,e.next=9;break;case 8:t.channels=n;case 9:return e.next=11,Object(s["f"])();case 11:r=e.sent,t.allChannels=r.data.data.channels;case 13:case"end":return e.stop()}}),e)})))()}},E=C,O=(n("0d2e"),Object(v["a"])(E,a,r,!1,null,"5b8a49a2",null));e["default"]=O.exports},"7db0":function(t,e,n){"use strict";var a=n("23e7"),r=n("b727").find,i=n("44d2"),s="find",c=!0;s in[]&&Array(1)[s]((function(){c=!1})),a({target:"Array",proto:!0,forced:c},{find:function(t){return r(this,t,arguments.length>1?arguments[1]:void 0)}}),i(s)},a434:function(t,e,n){"use strict";var a=n("23e7"),r=n("da84"),i=n("23cb"),s=n("5926"),c=n("07fa"),o=n("7b0b"),l=n("65f0"),u=n("8418"),f=n("1dde"),d=f("splice"),h=r.TypeError,p=Math.max,v=Math.min,m=9007199254740991,b="Maximum allowed length exceeded";a({target:"Array",proto:!0,forced:!d},{splice:function(t,e){var n,a,r,f,d,g,_=o(this),w=c(_),k=i(t,w),x=arguments.length;if(0===x?n=a=0:1===x?(n=0,a=w-k):(n=x-2,a=v(p(s(e),0),w-k)),w+n-a>m)throw h(b);for(r=l(_,a),f=0;f<a;f++)d=k+f,d in _&&u(r,f,_[d]);if(r.length=a,n<a){for(f=k;f<w-a;f++)d=f+a,g=f+n,d in _?_[g]=_[d]:delete _[g];for(f=w;f>w-a+n;f--)delete _[f-1]}else if(n>a)for(f=w-a;f>k;f--)d=f+a-1,g=f+n-1,d in _?_[g]=_[d]:delete _[g];for(f=0;f<n;f++)_[f+k]=arguments[f+2];return _.length=w-a+n,r}})},a9e3:function(t,e,n){"use strict";var a=n("83ab"),r=n("da84"),i=n("e330"),s=n("94ca"),c=n("6eeb"),o=n("1a2d"),l=n("7156"),u=n("3a9b"),f=n("d9b5"),d=n("c04e"),h=n("d039"),p=n("241c").f,v=n("06cf").f,m=n("9bf2").f,b=n("408a"),g=n("58a8").trim,_="Number",w=r[_],k=w.prototype,x=r.TypeError,y=i("".slice),C=i("".charCodeAt),E=function(t){var e=d(t,"number");return"bigint"==typeof e?e:O(e)},O=function(t){var e,n,a,r,i,s,c,o,l=d(t,"number");if(f(l))throw x("Cannot convert a Symbol value to a number");if("string"==typeof l&&l.length>2)if(l=g(l),e=C(l,0),43===e||45===e){if(n=C(l,2),88===n||120===n)return NaN}else if(48===e){switch(C(l,1)){case 66:case 98:a=2,r=49;break;case 79:case 111:a=8,r=55;break;default:return+l}for(i=y(l,2),s=i.length,c=0;c<s;c++)if(o=C(i,c),o<48||o>r)return NaN;return parseInt(i,a)}return+l};if(s(_,!w(" 0o1")||!w("0b1")||w("+0x1"))){for(var N,I=function(t){var e=arguments.length<1?0:w(E(t)),n=this;return u(k,n)&&h((function(){b(n)}))?l(Object(e),n,I):e},j=a?p(w):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,isFinite,isInteger,isNaN,isSafeInteger,parseFloat,parseInt,fromString,range".split(","),L=0;j.length>L;L++)o(w,N=j[L])&&!o(I,N)&&m(I,N,v(w,N));I.prototype=k,k.constructor=I,c(r,_,I)}},abfd:function(t,e,n){},cf05:function(t,e,n){t.exports=n.p+"img/logo.4653c8be.png"},e0b7:function(t,e,n){},fbf3:function(t,e,n){"use strict";n("e0b7")}}]);